@page "{id:guid}"
@model FixHub.Web.Pages.Technicians.ProfileModel
@{
    ViewData["Title"] = Model.Profile?.FullName ?? "Perfil técnico";
}

@if (Model.Profile is null)
{
    <div class="alert alert-danger">Perfil no encontrado.</div>
}
else
{
    var p = Model.Profile;
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-header d-flex align-items-center gap-3">
                    <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
                         style="width:56px;height:56px;font-size:1.4rem;font-weight:bold">
                        @p.FullName[0]
                    </div>
                    <div>
                        <h4 class="mb-0">@p.FullName</h4>
                        <small class="text-muted">@p.Email</small>
                        @if (p.IsVerified)
                        {
                            <span class="badge bg-success ms-1">Verificado</span>
                        }
                    </div>
                </div>
                <div class="card-body">
                    @if (!string.IsNullOrEmpty(p.Bio))
                    {
                        <p class="mb-2">@p.Bio</p>
                    }
                    <div class="row g-2 text-center">
                        <div class="col-4">
                            <div class="border rounded py-2">
                                <div class="fs-4 fw-bold text-warning">@p.AvgRating.ToString("N1") ★</div>
                                <div class="small text-muted">Calificación</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="border rounded py-2">
                                <div class="fs-4 fw-bold text-success">@p.CompletedJobs</div>
                                <div class="small text-muted">Completados</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="border rounded py-2">
                                <div class="fs-4 fw-bold text-info">@p.ServiceRadiusKm km</div>
                                <div class="small text-muted">Radio</div>
                            </div>
                        </div>
                    </div>
                    @if (!string.IsNullOrEmpty(p.Phone))
                    {
                        <p class="mt-3 mb-0"><strong>Teléfono:</strong> @p.Phone</p>
                    }
                    @if (p.CancelRate > 0)
                    {
                        <p class="mb-0"><strong>Tasa cancelación:</strong> @((p.CancelRate * 100).ToString("N1"))%</p>
                    }
                </div>
                <div class="card-footer">
                    <a asp-page="/Jobs/Index" class="btn btn-outline-secondary btn-sm">Volver</a>
                </div>
            </div>
        </div>
    </div>
}
